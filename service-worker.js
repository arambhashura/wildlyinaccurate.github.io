const RESOURCE_CACHE='wildlyinaccurate-resources',baseUrl=new URL('./',self.location);self.addEventListener('fetch',(a)=>{const b=new URL(a.request.url);b.origin===baseUrl.origin&&a.respondWith(staleWhileRevalidate(a.request))});function staleWhileRevalidate(a){return caches.open(RESOURCE_CACHE).then((b)=>b.match(a).then((c)=>{const d=fetch(a).then((e)=>{return b.put(a,e.clone()),console.debug('Cache updated for',a.url),e}).catch(()=>{console.debug('Using stale cache for',a.url)});return c||d}))}
